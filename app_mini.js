(function(){"use strict";loadStyles(),createWindow(),sparcInputsController()})();function preventAnyClicks(){console.log("This document is click-prevented");let b=document;b.addEventListener("click",function(c){c.preventDefault(),console.log("prevented clicks")})}function sparcInputsController(){"use strict";const b=document.getElementById("aybe_select_options");b.oninput=function(){let c=b.options[b.options.selectedIndex].value;console.log(c),"get_localstorage_data"===c?(loadDataAndSave(),mainDebugger()):"read_file"===c?(readData(),doubleDivPolice(),mainDebugger()):"review_ticket"===c?(review_ticket(),mainDebugger()):"do_nothing"===c?(clearThemAll(),mainDebugger()):"check_assets"===c&&checkAssets()}}function dataLoader(){const b=document.querySelectorAll("span.value.inactive");storage=window.localStorage;for(let d=0;d<b.length;d++)localStorage.setItem(d+b[d].parentElement.parentElement.parentElement.childNodes[1].textContent.replace(":","").trim(),b[d].innerText.replace(/[\n\t\r]/g,"").trim())}function loadDataAndSave(){const b=document.getElementById("project-name-val").textContent,c=window.location.href,d=document.querySelectorAll("span.value.inactive");let g=[];for(let l=0;l<d.length;l++)g.push(d[l].innerText.replace(/[\n\t\r]/g,"").trim());g.push(b),g.push(c);let h="text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(g)),j=document.createElement("a");j.href="data:"+h,j.download=b+".txt",j.innerHTML="<strong id=\"download_field\" style=\"text-align:center;display:block;text-decoration:underline\">Download</strong>",document.getElementById("window_content").appendChild(j)}function readData(){const c=document.createElement("div");c.setAttribute("id","upload_div"),c.innerHTML="<input type=\"file\" id=\"emarsys_files\" class=\"shit_controllor\" />",document.getElementById("window_content").appendChild(c),handleFiles()}function handleFiles(){var b=document.getElementById("emarsys_files"),c=document.getElementById("window_content");b.addEventListener("change",function(){var g=b.files[0],h=/text.*/;if(g.type.match(h)){var j=new FileReader;j.onload=function(){let m=j.result,n=m.replace(/\"/g,""),o=n.split(",");console.log(o);for(let r=0;r<o.length;r++)localStorage.setItem(r,o[r]);const p=document.getElementById("emarsys_files");p.style.display="none";const q=document.getElementById("dialog_space");q.innerHTML="<strong style='color:green'>Load Went successfully</strong>"},j.readAsText(g)}else{const l=document.getElementById("dialog_space");l.innerHTML="<strong style='color:red'>MEH! Something went wrong. Contact Jaroslav!</strong>"}})}function doubleDivPolice(){for(const b=document.getElementsByClassName("shit_controllor");1<b.length;)document.getElementById("upload_div").remove()}function review_ticket(){tutorialMessage("Please, click on the following fields with background color <span style='background: rgba(214, 208, 208, 0.3);font-size:bold;'>GREY</span> in this Sparc Ticket"),function(){"use strict";const b=document.getElementById("window_content"),c=document.createElement("div");c.setAttribute("id","numberOfSparcItems");const d=["Country <br><a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/9.+Campaigns'>Wiki</a>","Admin Campaign <br> <a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/Campaign+Types'>Wiki</a>","Requested type <br><a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/9.+Campaigns'>Wiki</a>","Correct Complexity <br><a href='https://wiki.vip.corp.ebay.com/pages/viewpage.action?pageId=352537594' target='_blank' class='wiki_aybe'>Wiki</a>","Department","Campaign Type <br> <a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/Campaign+Types'>Wiki</a>","Number of Email Contents","MC Contents <br> <a class='wiki_aybe' href='https://wiki.vip.corp.ebay.com/display/COEDM/Campaign+Building+in+MC' target='_blank'>Wiki</a>","If Recurring (check recurrence frequency)","Dynamic Contents <br><a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/Dynamic+Fields'>Wiki</a>","Subject Line Options <br> <a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/pages/viewpage.action?pageId=368165102'>Wiki</a>","Litmus Tracking <br><a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/Litmus+Testing'>Wiki</a>","Coupon <br> <a class='wiki_aybe' target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/Coupons#e9790545f13f47c6b854bb1d5b732f08'>Wiki</a>","Subjet Lines <br> <a target='_blank' href='https://wiki.vip.corp.ebay.com/pages/viewpage.action?pageId=417917662' class='wiki_aybe'>Wiki</a>","Description","Personalized Fields","Attachments"],g=document.createElement("ul");g.setAttribute("id","sparc_list");let j=0;for(j=0;j<d.length;j++){let l=document.createElement("li");l.setAttribute("class","sparcList"),g.appendChild(l),l.innerHTML=d[j]}c.innerHTML=d.length,b.appendChild(c),b.appendChild(g)}(),function(){"use strict";let b=document.getElementsByClassName("value inactive");console.log("These are all the elements within value inactive class"),console.log(b),b[4].style.background="rgba(214, 208, 208, 0.3)",b[4].style.fontWeight="bold",b[11].style.background="rgba(214, 208, 208, 0.3)",b[11].style.fontWeight="bold",b[22].style.background="rgba(214, 208, 208, 0.3)",b[22].style.fontWeight="bold",b[24].style.background="rgba(214, 208, 208, 0.3)",b[24].style.fontWeight="bold",b[26].style.background="rgba(214, 208, 208, 0.3)",b[26].style.fontWeight="bold",b[27].style.background="rgba(214, 208, 208, 0.3)",b[27].style.fontWeight="bold",b[28].style.background="rgba(214, 208, 208, 0.3)",b[28].style.fontWeight="bold",b[29].style.background="rgba(214, 208, 208, 0.3)",b[29].style.fontWeight="bold",b[30].style.background="rgba(214, 208, 208, 0.3)",b[30].style.fontWeight="bold",b[31].style.background="rgba(214, 208, 208, 0.3)",b[31].style.fontWeight="bold",b[32].style.background="rgba(214, 208, 208, 0.3)",b[32].style.fontWeight="bold",b[34].style.background="rgba(214, 208, 208, 0.3)",b[34].style.fontWeight="bold",b[36].style.background="rgba(214, 208, 208, 0.3)",b[36].style.fontWeight="bold",b[38].style.background="rgba(214, 208, 208, 0.3)",b[38].style.fontWeight="bold",changeItemOnHover()}(),function(){"use strict";let b=document.getElementsByClassName("mod-content");console.log("This is the HTML collection for MOD content (I could not reach them via value inactive)"),console.log(b),b[8].style.background="rgba(214, 208, 208, 0.3)",b[8].style.fontWeight="bold",b[9].style.background="rgba(214, 208, 208, 0.3)",b[9].style.fontWeight="bold",b[11].style.background="rgba(214, 208, 208, 0.3)",b[11].style.fontWeight="bold",changeItemOnHover2()}()}function changeItemOnHover2(){function b(){this.style.background="white";let g;for(var h=0;h<d.length;h++)if(d[h]===this){g=h;break}const j=document.getElementsByClassName("sparcList");if(console.log(g),8===g){j[14].style.background="rgba(11, 165, 11, 0.3)",j[14].innerHTML="Description &#10004;";setTimeout(function(){j[14].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(11===g){j[15].style.background="rgba(11, 165, 11, 0.3)",j[15].innerHTML="Personalized Fields &#10004;";setTimeout(function(){j[15].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(9===g){j[16].style.background="rgba(11, 165, 11, 0.3)",j[16].innerHTML="Attachments Fields &#10004;";setTimeout(function(){j[16].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}}let d=document.getElementsByClassName("mod-content");Array.from(d).forEach(function(g){g.addEventListener("click",b)})}function changeItemOnHover(){function b(){this.style.background="rgba(11, 165, 11, 0.3)";let g;for(var h=0;h<d.length;h++)if(d[h]===this){g=h;break}console.log(g);const j=document.getElementsByClassName("sparcList");if(36===g){j[10].style.background="rgba(11, 165, 11, 0.3)",j[10].innerHTML="Subject Line Options &#10004;";setTimeout(function(){j[10].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(4===g){const l=document.getElementsByClassName("value inactive");j[0].style.background="rgba(11, 165, 11, 0.3)",j[0].innerHTML="Country &#10004;",c.push("001.You are working on <strong>"+l[4].innerText+"</strong>."),console.log(c);setTimeout(function(){j[0].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(11===g){const l=document.getElementsByClassName("value inactive"),m=document.getElementsByClassName("checkbox")[0].checked;j[1].style.background="rgba(11, 165, 11, 0.3)",!0===m?(j[1].innerHTML="Careful! This is Admin Campaign &#10004; <br> <a target='_blank' href='https://wiki.vip.corp.ebay.com/display/COEDM/Campaign+Types'>Wiki</a>",c.push("002.Be aware of this campaign. It's admin campaign, it means Auto Filter  needs to be unthicked and also make sure you are using coorect foote."),console.log(c)):(j[1].innerHTML="This is NOT Admin Campaign &#10004;",c.push("002. This campaign is not Admin one. Auto filter recipients needs to be thicked"),console.log(c));setTimeout(function(){j[1].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(22===g){j[2].style.background="rgba(11, 165, 11, 0.3)",j[2].innerHTML="Requested Type &#10004;";setTimeout(function(){j[2].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(24===g){j[3].style.background="rgba(11, 165, 11, 0.3)",j[3].innerHTML="Correct Complexity &#10004;";setTimeout(function(){j[3].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(26===g){j[4].style.background="rgba(11, 165, 11, 0.3)",j[4].innerHTML="Department &#10004;";setTimeout(function(){j[4].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(27===g){j[5].style.background="rgba(11, 165, 11, 0.3)",j[5].innerHTML="Campaign Type &#10004;";setTimeout(function(){j[5].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(28===g){j[6].style.background="rgba(11, 165, 11, 0.3)",j[6].innerHTML="Number of Email Contents &#10004;";setTimeout(function(){j[6].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(30===g){j[7].style.background="rgba(11, 165, 11, 0.3)",j[7].innerHTML="Number of MC contents &#10004;";setTimeout(function(){j[7].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(32===g){j[8].style.background="rgba(11, 165, 11, 0.3)",j[8].innerHTML="Recurring Check &#10004;";setTimeout(function(){j[8].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(34===g){j[9].style.background="rgba(11, 165, 11, 0.3)",j[9].innerHTML="Dynamic Contents &#10004;";setTimeout(function(){j[9].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(29===g){j[11].style.background="rgba(11, 165, 11, 0.3)",j[11].innerHTML="Litmus Tracking &#10004;";setTimeout(function(){j[11].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(31===g){j[12].style.background="rgba(11, 165, 11, 0.3)",j[12].innerHTML="Coupon &#10004;";setTimeout(function(){j[12].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}else if(38===g){j[13].style.background="rgba(11, 165, 11, 0.3)",j[13].innerHTML="Subject Lines &#10004;";setTimeout(function(){j[13].style.display="none",deleteSparcCount()},2e3);this.removeEventListener("click",b)}}let c=[],d=document.getElementsByClassName("value inactive");Array.from(d).forEach(function(g){g.addEventListener("click",b)}),getComplexityData(),isCoupon()}function deleteSparcCount(){const b=document.getElementById("numberOfSparcItems");if(b.innerHTML=b.innerText-1,15<=b.innerText)b.style.color="red";else if(10<=b.innerText)b.style.color="orange";else if(5<=b.innerText)b.style.color="gold";else if(1<=b.innerText)b.style.color="green";else if(1>b.innerText){b.style.color="purple",b.innerHTML="If you have all the information from Campaign Manager - <strong>download and open HTML creative</strong>. I will help you to check it also!";setTimeout(function(){b.style.display="none";document.getElementById("aybe_select_options").selectedIndex="0";clearThemAll()},7e3)}}function getComplexityData(){is_this_coupon=document.getElementsByClassName("checkbox")[3].checked;let b=0;+b,console.log("I do check if complexity is correct");let c=document.getElementsByClassName("value inactive ")[28].innerText;+c,console.log(c),""===c?console.log("this value is empty"):b+=parseInt(c);let d=document.getElementsByClassName("value inactive ")[30].innerText;+d,console.log(d),""===d?console.log("MC value is empty"):b+=parseInt(d),console.log("Value of complexity after Email Content check: "+b);const g=document.createElement("div");g.setAttribute("id","complexity_paragraph"),g.style.color="rgba(83, 84, 36, 0.6)",g.style.fontSize="10px";const h=document.getElementsByClassName("sparcList")[3];is_this_coupon?(console.log("This is at least medium"),g.innerHTML="(Should be at least Medium or higher)",h.appendChild(g)):0==b?(console.log("this is Extra Small Campaign"),g.innerHTML="(Should be Extra Small or higher)",h.appendChild(g)):2>=b?(console.log("this is Small Campaign"),g.innerHTML="(Should be Small or higher)",h.appendChild(g)):5>=b?(console.log("this is Medium Campaign"),g.innerHTML="(Should be Medium or higher)",h.appendChild(g)):5<b&&(console.log("This campaign is Large or Extra Large"),g.innerHTML="(Should be Large or Extra Large or higher)",h.appendChild(g))}function isCoupon(){const b=document.getElementsByClassName("checkbox ")[3].checked,c=document.createElement("div");c.setAttribute("id","coupon_id"),c.style.color="rgba(83, 84, 36, 0.6)",c.style.fontSize="10px";const d=document.getElementsByClassName("sparcList")[12];!0===b?(c.innerHTML="(Careful, this is COUPON!)",d.appendChild(c)):(c.innerHTML="(This is not a coupon!)",d.appendChild(c))}function checkAssets(){console.log("Checking Assets"),tutorialMessage("Please, look at highlighted links in HTML file. <br> <span style='color:green'>Green color</span> = good<br> <span style='color:orange'>Orange</span> color = warning<br><span style='color:red'>Red</span> color - Almost 100% problem"),checkAllTheLinks()}function checkAllTheLinks(){const b=document.getElementsByTagName("a"),c=[],d=[],g=[],h=[];for(var j=0;j<b.length;j++)c.push(b[j].href),c.toString().endsWith(".com")||c.toString().endsWith("/")||c.toString().endsWith(".html")||c.toString().endsWith(".com.au")||c.toString().endsWith(".be")||c.toString().endsWith(".ca")||c.toString().endsWith(".fr")||c.toString().endsWith(".com.hk")||c.toString().endsWith(".in")||c.toString().endsWith(".com.m")||c.toString().endsWith(".nl")||c.toString().endsWith(".ph")||c.toString().endsWith(".pl")||c.toString().endsWith(".com.sg")||c.toString().endsWith(".es")||c.toString().endsWith(".vn")||c.toString().endsWith(".co.uk")||c.toString().endsWith(".com")||c.toString().endsWith(".com.tw")||c.toString().endsWith(".com.sea")||c.toString().endsWith(".it")||c.toString().endsWith(".co.jp")||c.toString().endsWith(".co.th")||c.toString().endsWith(".co.id")||c.toString().endsWith(".cn")||c.toString().endsWith(".de")||c.toString().endsWith(".co.il")||c.toString().endsWith(".hk")||c.toString().endsWith(".ch")||c.toString().endsWith(".at")||c.toString().endsWith(".ie")?(d.push(c[j]),b[j].style.border="2px dashed green"):c.toString().endsWith(".html")||c.toString().endsWith("#")?c.toString().endsWith("#")&&(h.push(c[j]),b[j].style.border="2px dashed red",b[j].style.background="red"):(g.push(c[j]),b[j].style.border="2px dashed orange");console.log("Valid Links"),console.log(d),logMessage("<span style='color:green'>I found "+d.length+" links, which are OK!</span>"),console.log("Invalid Links"),console.log(g),logMessage("<span style='color:orange'>I found "+g.length+" links, which might have problem with backslash!</span>"),console.log("Empty Links"),console.log(h),logMessage("<span style='color:red'>I found "+h.length+" links, which are empty!</span>"),console.log("Full Array"),console.log(c)}function createWindow(){const b=document.getElementsByTagName("div")[0],c=document.createElement("div");c.setAttribute("class","ahojky"),c.setAttribute("id","window_content"),b.appendChild(c),aybe()}function aybe(){const l=document.createElement("div");l.setAttribute("class","options_of_aybe"),l.setAttribute("id","id_of_options"),l.innerHTML="<select id='aybe_select_options'>"+"<option value='do_nothing'>--</option>"+"<option value='review_ticket' id='review_ticket_data'>Review Ticket</option>"+"<option value='get_localstorage_data' id='download_ticket_data'>Download Ticket Data</option>"+"<option value='read_file' id='load_to_sparc'>Load Sparc To Emarsys</option>"+"<option value='check_assets' id='asset_checker'>Check This HTML</option>"+"</select>";const m=document.getElementById("window_content");m.appendChild(l),optionController(),aybeSwitcher()}function optionController(){const b=window.location.href;if(b.match(/broadcast/g)){const c=document.getElementById("download_ticket_data").remove(),d=document.getElementById("review_ticket_data").remove(),g=document.getElementById("asset_checker").remove();displayMessages()}else if(b.match(/helpdesk/g)||b.match(/127/g)){const c=document.getElementById("load_to_sparc").remove(),d=document.getElementById("asset_checker").remove()}else if(b.match(/file/g)){const c=document.getElementById("load_to_sparc").remove(),d=document.getElementById("download_ticket_data").remove(),g=document.getElementById("review_ticket_data").remove()}}function displayMessages(){const b=document.getElementById("window_content");let c=document.createElement("div");c.setAttribute("id","dialog_space"),b.appendChild(c),c.innerHTML=null===localStorage.getItem("44")?"No ticket connected!":"<a target='_blank' href='"+localStorage.getItem("45").replace(/]/g,"")+"'>Loaded ticket: "+localStorage.getItem("44")+"</a>"}function aybeSwitcher(){let c=document.getElementById("window_content");c.style.right="-215px";const d=document.createElement("div");d.setAttribute("id","jump_window"),d.innerHTML="&Lang;",c.appendChild(d),d.addEventListener("click",function(){g+=1,console.log(g),1===g?(d.innerHTML="&Rang;",c.style.right="0px",c.style.background="white"):2==g&&(d.innerHTML="&Lang;",c.style.right="-215px",c.style.background="rgba(0, 0, 0, 0.2)",g=0)});let g=0}function clearThemAll(){console.log("clearing everything");let b=document.getElementById("window_content").childNodes;console.log(b);let c=b.length;for(let h=c-1;2<=h;h--)b[h].remove(),console.log(h);let d=document.getElementsByClassName("value inactive");for(let h=0;h<d.length;h++)d[h].style.background="white",d[h].style.fontWeight="normal";let g=document.getElementsByClassName("mod-content");for(let h=0;h<g.length;h++)g[h].style.background="white",g[h].style.fontWeight="normal"}function loadStyles(){const b=document.createElement("style"),c=document.getElementsByTagName("div")[0];b.innerHTML=".error_message_class{text-align:left;}.tutorial_message_class{text-align:left;border-bottom:1px solid black;padding:0px;font-size:11px;}.tutorial_headline{font-weight:bold;font-size:13px;color:#132456;font-style:italic;}"+"#window_content::-webkit-scrollbar{width:8px;background-color: white;}#window_content::-webkit-scrollbar-thumb{background-color: #e53238;}#window_content::-webkit-scrollbar-track{-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);background-color: #F5F5F5;}"+".wiki_aybe{font-size:8px;text-transform:uppercase;color:grey;}"+"#jump_window{position: absolute;top: 22px;left: 8px;font-size: 18px;font-weight: bold;cursor: pointer;color: #32b6f7;}"+"#numberOfSparcItems{text-align:center}"+"#sparc_list li{text-align: center;font-weight: 900;font-size: 11px;padding: 4px;margin-bottom: 3px; border-radius: 6px; cursor: pointer;background: rgba(214, 208, 208, 0.3);} ul#sparc_list{list-style-type:none;padding: 0px;}"+"#dialog_space{font-size:11px;color:green;display:block;text-align:center;font-weight:bold}"+"#open_close {right: 0px;width: 200px;position: fixed;text-align: center;padding: 20px;top: 65px;color: red;font-size: 20px;font-weight: bold;}.open_close_class{border: 2px solid black;padding: 6px;border-radius: 50%;color: red;border-color: #ff0303;cursor: pointer;z-index: 9999;}"+"#aybe_select_options{padding: 4px;border-radius: 6px;color: #545454 !important;font-weight: bold;border: 2px solid #0bb1f1;}"+".ahojky{overflow-y: scroll;overflow-x: hidden;max-height:350px;box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.5);border-radius:6px;padding:20px;position:fixed;top:0px;right:0px;width:200px;height:auto;border:3px solid rgba(255,255,255,0.1);background-color:rgba(255,255,255,0.4);z-index:9999}.ahojky:hover{background-color:rgba(255,255,255,0.8);}"+"#id_of_options select{display:block;margin: 0 auto;}",c.appendChild(b)}function mainDebugger(){}function logMessage(b){get_window=document.getElementById("window_content"),create_ul=document.createElement("ul"),create_ul.setAttribute("class","error_message_class"),get_window.appendChild(create_ul),create_li=document.createElement("li"),create_li.setAttribute("class","log_li"),create_li.innerHTML=b,create_ul.appendChild(create_li)}function tutorialMessage(b){get_window=document.getElementById("window_content"),create_ul=document.createElement("ul"),create_ul.setAttribute("class","tutorial_message_class"),get_window.appendChild(create_ul),create_li=document.createElement("div"),create_li.setAttribute("class","log_li"),create_li.innerHTML="<h3 class='tutorial_headline'>What to do...</h3>"+b,create_ul.appendChild(create_li)}